<div class="row">
    <!-- Sidebar: Live Radio and Top News -->
    <aside class="col-md-3">
        <!-- Live Radio -->
        <div class="card border-0 shadow-sm mb-4">
            <div class="card-body text-center">
                <h5 class="card-title font-weight-bold d-flex align-items-center justify-content-center">
                    <i class="fas fa-broadcast-tower text-danger mr-2"></i> Live Radio
                </h5>
                <div class="audio-player">
                    <audio id="radioPlayer" style="width: 100%; border-radius: 5px;">
                        <source src="https://stream.zeno.fm/ufm2ncifwssuv" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                    <div class="audio-controls mt-2 d-flex justify-content-center align-items-center">
                        <button id="playPauseBtn" class="btn btn-danger btn-sm mr-2">
                            <i class="fas fa-play"></i>
                        </button>
                        <i class="volume-icon fas fa-volume-up mx-2"></i>
                        <input
                            id="volumeBar"
                            type="range"
                            min="0"
                            max="1"
                            step="0.01"
                            value="0.5"
                            class="volume-bar"
                            style="display: none; width: 80px;" />
                    </div>
                </div>
            </div>
        </div>

        <!-- Top News -->
        <h4 class="mb-3 font-weight-bold">Top News</h4>
        {% for news in latest_news|slice:":1" %}
        <div class="card border-0 shadow-sm mb-4">
            <a href="{% url 'news_detail' news.pk %}">
                <img src="{{ news.image.url }}" class="card-img-top rounded" alt="{{ news.title }}">
                <span class="badge badge-primary position-absolute m-2 p-2">{{ news.category }}</span>
            </a>
            <div class="card-body">
                <h6 class="card-title font-weight-bold">
                    <a href="{% url 'news_detail' news.pk %}" class="text-dark">{{ news.title }}</a>
                </h6>
                <p class="text-muted small">By {{ news.published_by.name }} on {{ news.date_published }}</p>
            </div>
        </div>
        {% endfor %}
    </aside>

    <!-- Main News -->
    <main class="col-md-6">
        {% if main_news %}
        <div class="card border-0 shadow-lg mb-4">
            <a href="{% url 'news_detail' main_news.pk %}">
                <img src="{{ main_news.image.url }}" class="card-img-top rounded" alt="{{ main_news.title }}">
                <span class="badge badge-danger position-absolute m-2 p-2">{{ main_news.category }}</span>
            </a>
            <div class="card-body">
                <h4 class="card-title font-weight-bold">
                    <a href="{% url 'news_detail' main_news.pk %}" class="text-dark">{{ main_news.title }}</a>
                </h4>
                <p class="text-muted small">By {{ main_news.published_by.name }} on {{ main_news.date_published }}</p>
                <p>{{ main_news.content|truncatechars:200 }}</p>
            </div>
        </div>
        {% endif %}
    </main>

    <!-- Trending and Latest News -->
    <aside class="col-md-3">
        <div class="card shadow-sm border-0">
            <div class="card-header bg-white">
                <ul class="nav nav-tabs card-header-tabs" id="newsTabs">
                    <li class="nav-item">
                        <a class="nav-link active text-dark font-weight-bold" id="trending-tab" data-toggle="tab" href="#trending" role="tab">Trending</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-dark font-weight-bold" id="latest-tab" data-toggle="tab" href="#latest" role="tab">Latest</a>
                    </li>
                </ul>
            </div>
            <div class="tab-content p-3">
                <!-- Trending -->
                <div class="tab-pane fade show active" id="trending" role="tabpanel">
                    <ul class="list-group list-group-flush small-text-list">
                        {% for news in trending_news %}
                        <li class="list-group-item">
                            <a href="{% url 'news_detail' news.pk %}" class="text-primary">{{ news.title }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                <!-- Latest -->
                <div class="tab-pane fade" id="latest" role="tabpanel">
                    <ul class="list-group list-group-flush small-text-list">
                        {% for news in latest_news %}
                        <li class="list-group-item">
                            <a href="{% url 'news_detail' news.pk %}" class="text-primary">{{ news.title }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
        
    </aside>
</div>



<script>
    document.addEventListener("DOMContentLoaded", function () {
        const audio = document.getElementById("radioPlayer");
        const playPauseBtn = document.getElementById("playPauseBtn");
        const volumeIcon = document.querySelector(".volume-icon");
        const volumeBar = document.getElementById("volumeBar");
    
        // Set initial volume
        audio.volume = 0.5;
    
        // Play/Pause toggle
        playPauseBtn.addEventListener("click", function () {
            if (audio.paused) {
                audio.play();
                playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
            } else {
                audio.pause();
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
            }
        });
    
        // Show/Hide volume bar on icon click
        volumeIcon.addEventListener("click", function () {
            volumeBar.style.display = volumeBar.style.display === "none" ? "block" : "none";
        });
    
        // Update audio volume
        volumeBar.addEventListener("input", function () {
            audio.volume = this.value;
    
            // Change icon based on volume level
            if (audio.volume === 0) {
                volumeIcon.className = "volume-icon fas fa-volume-mute";
            } else if (audio.volume < 0.5) {
                volumeIcon.className = "volume-icon fas fa-volume-down";
            } else {
                volumeIcon.className = "volume-icon fas fa-volume-up";
            }
        });
    });
    </script>